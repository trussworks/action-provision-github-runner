name: 'Provision GitHub Runners'
description: 'Scale up ECS Service count and deploy a task definition'
inputs:
  AWS_ACCESS_KEY_ID:
    description: >-
      AWS Access Key ID. This input is required if running in the GitHub hosted environment.
      It is optional if running in a self-hosted environment that already has AWS credentials,
      for example on an EC2 instance.
    required: false
  AWS_SECRET_ACCESS_KEY:
    description: >-
      AWS Secret Access Key. This input is required if running in the GitHub hosted environment.
      It is optional if running in a self-hosted environment that already has AWS credentials,
      for example on an EC2 instance.
    required: false
  AWS_REGION:
    description: 'Your AWS region'
    required: true
    default: 'us-east-1'
  ECR_REPOSITORY:
    description: 'the name of the ECR repository to target'
    required: true
  IMAGE_TAG:
    description: 'the unique tag of a specific image to pull from your ECR repository'
    required: true
    default: 'latest'
  CONTAINER_NAME:
    description: 'the container name'
    required: true
  TASK_DEFINITION:
    description: 'the task definition family name'
    required: true
  SERVICE:
    description: 'the name of the ECS service to deploy to'
    required: true
  CLUSTER: 
    description: 'the name of the ECS cluster the service belongs to'
    required: true
  DESIRED_COUNT:
    description: 'the number of runners you need'
    required: true
    default: '1'
runs:
  using: 'node12'
  main: 'dist/index.js'
  post: 'dist/cleanup/index.js'